/*! @name videojs-playlist @version 4.2.6 @license Apache-2.0 */
var videojsPlaylist=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var r=function(e){var r=e.playlist.autoadvance_;r.timeout&&e.clearTimeout(r.timeout),r.trigger&&e.off("ended",r.trigger),r.timeout=null,r.trigger=null},t=function e(t,n){var i;(r(t),"number"==typeof(i=n)&&!isNaN(i)&&i>=0&&i<1/0)?(t.playlist.autoadvance_.delay=n,t.playlist.autoadvance_.trigger=function(){var i=function(){return e(t,n)};t.one("play",i),t.playlist.autoadvance_.timeout=t.setTimeout(function(){r(t),t.off("play",i),t.playlist.next()},1e3*n)},t.one("ended",t.playlist.autoadvance_.trigger)):t.playlist.autoadvance_.delay=null},n=function(e,r){var n=!e.paused()||e.ended();return e.trigger("beforeplaylistitem",r),e.poster(r.poster||""),e.src(r.sources),function(e){for(var r=e.remoteTextTracks(),t=r&&r.length||0;t--;)e.removeRemoteTextTrack(r[t])}(e),e.ready(function(){if((r.textTracks||[]).forEach(e.addRemoteTextTrack.bind(e)),e.trigger("playlistitem",r),n){var i=e.play();void 0!==i&&"function"==typeof i.then&&i.then(null,function(e){})}t(e,e.playlist.autoadvance_.delay)}),e},i=function(e,r){for(var t=0;t<e.length;t++){var n=e[t].sources;if(Array.isArray(n))for(var i=0;i<n.length;i++){var a=n[i];if(a&&(l=void 0,c=void 0,l=u=a,c=o=r,"object"==typeof u&&(l=u.src),"object"==typeof o&&(c=o.src),/^\/\//.test(l)&&(c=c.slice(c.indexOf("//"))),/^\/\//.test(c)&&(l=l.slice(l.indexOf("//"))),l===c))return t}}var u,o,l,c;return-1},a=function(e){for(var r=-1,t=e.length-1;++r<e.length;){var n=r+Math.floor(Math.random()*(t-r+1)),i=e[n];e[n]=e[r],e[r]=i}return e};var u=function(u,o){!function(u,o,l){void 0===l&&(l=0);var c=null,s=!1,d=u.playlist=function(e,r){if(void 0===r&&(r=0),s)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(e)){var t=Array.isArray(c)?c.slice():null;c=e.slice(),s=!0,u.trigger({type:"duringplaylistchange",nextIndex:r,nextPlaylist:c,previousIndex:d.currentIndex_,previousPlaylist:t||[]}),s=!1,-1!==r&&d.currentItem(r),t&&u.setTimeout(function(){u.trigger("playlistchange")},0)}return c.slice()};u.on("loadstart",function(){-1===d.currentItem()&&r(u)}),d.currentIndex_=-1,d.player_=u,d.autoadvance_={},d.repeat_=!1,d.currentItem=function(e){return s?d.currentIndex_:("number"==typeof e&&d.currentIndex_!==e&&e>=0&&e<c.length?(d.currentIndex_=e,n(d.player_,c[d.currentIndex_])):d.currentIndex_=d.indexOf(d.player_.currentSrc()||""),d.currentIndex_)},d.contains=function(e){return-1!==d.indexOf(e)},d.indexOf=function(e){if("string"==typeof e)return i(c,e);for(var r=Array.isArray(e)?e:e.sources,t=0;t<r.length;t++){var n=r[t];if("string"==typeof n)return i(c,n);if(n.src)return i(c,n.src)}return-1},d.currentIndex=function(){return d.currentItem()},d.lastIndex=function(){return c.length-1},d.nextIndex=function(){var e=d.currentItem();if(-1===e)return-1;var r=d.lastIndex();return d.repeat_&&e===r?0:Math.min(e+1,r)},d.previousIndex=function(){var e=d.currentItem();return-1===e?-1:d.repeat_&&0===e?d.lastIndex():Math.max(e-1,0)},d.first=function(){if(!s)return c.length?c[d.currentItem(0)]:void(d.currentIndex_=-1)},d.last=function(){if(!s)return c.length?c[d.currentItem(d.lastIndex())]:void(d.currentIndex_=-1)},d.next=function(){if(!s){var e=d.nextIndex();return e!==d.currentIndex_?c[d.currentItem(e)]:void 0}},d.previous=function(){if(!s){var e=d.previousIndex();return e!==d.currentIndex_?c[d.currentItem(e)]:void 0}},d.autoadvance=function(e){t(d.player_,e)},d.repeat=function(r){return void 0===r?d.repeat_:"boolean"==typeof r?(d.repeat_=!!r,d.repeat_):void e.log.error("videojs-playlist: Invalid value for repeat",r)},d.sort=function(e){c.length&&(c.sort(e),s||u.trigger("playlistsorted"))},d.reverse=function(){c.length&&(c.reverse(),s||u.trigger("playlistsorted"))},d.shuffle=function(e){var r,t=(void 0===e?{}:e).rest,n=0,i=c;(t&&(n=d.currentIndex_+1,i=c.slice(n)),i.length<=1)||(a(i),t&&(r=c).splice.apply(r,[n,i.length].concat(i)),s||u.trigger("playlistsorted"))},Array.isArray(o)?d(o.slice(),l):c=[]}(this,u,o)};return(e.registerPlugin||e.plugin)("playlist",u),u.VERSION="4.2.6",u}(videojs);
